function addTinyMCE(){jQuery.each(jQuery("textarea.tinymce"),function(){var e=jQuery(this).attr("id");tinyMCE.execCommand("mceAddEditor",!1,e)})}function removeTinyMCE(){jQuery.each(jQuery("textarea.tinymce"),function(){var e=jQuery(this).attr("id");tinyMCE.execCommand("mceRemoveEditor",!1,e)})}function evalTinyMCE(){jQuery("#wp-content-wrap").hasClass("tmce-active")?addTinyMCE():removeTinyMCE()}function storeurladdress(){"external_url"==document.getElementById("select_pageurls").value?(document.getElementById("proj_url_cont").style.display="block",document.getElementById("proj_posts").style.display="none"):"page_or_post"==document.getElementById("select_pageurls").value?(document.getElementById("proj_posts").style.display="block",document.getElementById("proj_url_cont").style.display="none"):"current_page"==document.getElementById("select_pageurls").value&&(document.getElementById("proj_posts").style.display="none",document.getElementById("proj_url_cont").style.display="none")}function storepurchaseurladdress(){"external_url"==document.getElementById("select_purchase_pageurls").value?(document.getElementById("purchase_url_cont").style.display="block",document.getElementById("purchase_posts").style.display="none"):"page_or_post"==document.getElementById("select_purchase_pageurls").value?(document.getElementById("purchase_posts").style.display="block",document.getElementById("purchase_url_cont").style.display="none"):"current_page"==document.getElementById("select_purchase_pageurls").value&&(document.getElementById("purchase_posts").style.display="none",document.getElementById("purchase_url_cont").style.display="none")}function toggleDiv(e){jQuery("#"+e).slideToggle()}jQuery(document).ready(function(){function e(){var e=jQuery("#product_level option:selected").data("price");""!=e&&void 0!=e||(e=0),jQuery('input[name="prod_price"]').val(e),jQuery("#formAddOrder").length>0?jQuery("#manual-input").val(e):jQuery("#formEditOrder").length>0&&(""==jQuery("#manual-input").val()||"no"==jQuery("#manual-input").data("firstedit")?jQuery("#manual-input").val(e):jQuery("#manual-input").data("firstedit","no"))}function t(){var t=jQuery("#product_id").val();jQuery.ajax({type:"POST",url:id_ajaxurl,data:{action:"get_product_levels",Project:t},success:function(t){jQuery("#product_level").html(jQuery.trim(t));var r=jQuery("#formEditOrder").data("orderid");r&&n(r),e()}})}function n(e){jQuery.ajax({type:"POST",url:id_ajaxurl,async:!1,data:{action:"get_order_level",Order:e},success:function(e){if(console.log(e),e&&(jQuery("#product_level").val(e),jQuery("#formEditOrder").data("order-price"))){var t=jQuery('#product_level option[value="'+e+'"]').data("price"),n=jQuery("#formEditOrder").data("order-price");n!==t&&jQuery("#manual-input").val(n)}}})}jQuery("#project_id_shortcodes").change(function(){var e=jQuery(this).val();jQuery.ajax({type:"POST",url:id_ajaxurl,data:{action:"get_product_number",product_id:e},success:function(e){jQuery(".id-metabox-short-codes .shortcode-content span").html(jQuery.trim(e))}})});var r="ign_project_description",c="ign_project_long_description",a="ign_updates",u="ign_disclaimer",o="ign_faqs";jQuery("#product_meta").length>0&&(evalTinyMCE(),jQuery("#content-html").click(function(){removeTinyMCE()}),jQuery("#content-tmce").click(function(){addTinyMCE()})),void 0==jQuery('input[name="ign_end_type"]:checked').val()&&jQuery('input[name="ign_end_type"]').eq(1).attr("checked","checked"),jQuery('select[name="deck_select"]').length>0&&jQuery.ajax({url:id_ajaxurl,type:"POST",data:{action:"get_deck_list"},success:function(e){json=JSON.parse(e),json&&(jQuery.each(json,function(e,t){jQuery('select[name="deck_select"]').append('<option value="'+this.id+'">'+this.id+": "+this.attrs.deck_title+"</option>")}),jQuery('select[name="deck_select"]').change(function(){var e=jQuery(this).val();e>0?jQuery.ajax({url:id_ajaxurl,type:"POST",data:{action:"get_deck_attrs",Deck:e},success:function(e){jQuery('input[name="deck_delete"]').show(),e.length>0&&(json=JSON.parse(e),json&&jQuery.each(json,function(e,t){1==t?jQuery('input[name="'+e+'"]').attr("checked","checked"):jQuery('input[name="'+e+'"]').val(t)}))}}):(jQuery(".deck-attr-text").val(""),jQuery(".deck-attr").removeAttr("checked"),jQuery('input[name="deck_delete"]').hide())}))}}),jQuery('select[name="product_id"]').length>0&&(jQuery('select[name="product_id"]').change(function(){t()}),jQuery("#product_level").change(function(){e()}),t()),jQuery('input[name="btn_generate_code"]').click(function(e){product_number=document.getElementById("product_number").value,document.getElementById("embed_code").innerHTML='<iframe height="366" width="214" frameborder="0" scrolling="no" src="'+id_homeurl+"/?ig_embed_widget=1&product_no="+product_number+'" width="214" height="366"></iframe>'}),jQuery(".hide-notice").click(function(e){e.preventDefault();var t=jQuery(this).attr("id");jQuery(this).parents(".updated").hide(),jQuery.ajax({url:id_ajaxurl,type:"POST",data:{action:"id_hide_notice",Notice:t},success:function(e){}})}),jQuery("#project-charge-screen").length>0&&(jQuery.ajax({url:id_ajaxurl,type:"POST",data:{action:"project_posts_list_ajax"},success:function(e){if(e.length>0){var t=JSON.parse(e);jQuery.each(t,function(){jQuery("#project-charge-screen select#project-list").append('<option value="'+this.ID+'">'+this.post_title+"</option>")})}}}),jQuery("#btnProcessProjectPreauth").click(function(e){e.preventDefault(),jQuery("#charge-notice").hide(),jQuery("#charge-notice .success-count, #charge-notice .fail-count").text("0"),jQuery(this).attr("disabled","disabled");var t=jQuery("select#project-list").val();jQuery.ajax({url:id_ajaxurl,type:"POST",data:{action:"send_preauth_to_idc",POST_ID:t},success:function(e){if(e.length>0)var t=JSON.parse(e);jQuery(t).size()>0&&jQuery.each(t,function(e,t){jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"md_process_preauth",Level:t},success:function(e){if(new_json=JSON.parse(e),jQuery("#charge-notice").length>0){var t=jQuery("#charge-notice .success-count").text();t=parseInt(new_json.counts.success)+parseInt(t),jQuery("#charge-notice .success-count").text(t);var n=jQuery("#charge-notice .fail-count").text();n=parseInt(new_json.counts.failures)+parseInt(n),jQuery("#charge-notice .fail-count").text(n)}else jQuery("#project-charge-confirm").html('<div id="charge-notice" class="updated fade below-h2" id="message"><p><span class="success-count">'+new_json.counts.success+'</span> Successful Transactions Processed, <span class="fail-count">'+new_json.counts.failures+'</span> Failed Transactions.</p><a id="close-notice" href="#">Close</a></div>');jQuery("#charge-notice").show(),jQuery("#close-notice").click(function(e){jQuery("#charge-notice").is(":visible")&&jQuery("#charge-notice").hide()}),jQuery("#btnProcessProjectPreauth").removeAttr("disabled")}})})}})}))});
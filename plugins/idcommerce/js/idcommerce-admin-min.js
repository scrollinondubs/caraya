function idcDiscardOrderEdit(){jQuery("#memberdeck-users td.order_item.order_edit a").show(),jQuery("#memberdeck-users td.order_item.order_edit .order_edit_field, #memberdeck-users td.order_item.order_edit a.order_edit_save, #memberdeck-users td.order_item.order_edit a.order_edit_undo").remove()}function idcCreateOrderEditObject(e){var r={id:jQuery(e).parent("tr").data("id"),column:jQuery(e).data("column"),value:jQuery(e).find("input.order_edit_field").val()};switch(jQuery(e).data("type")){case"float":r.value=idfParseFloat(r.value);break;default:break}return r}jQuery(document).ready(function(){function e(){jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_get_downloads"},success:function(e){var r=JSON.parse(e);jQuery.each(r,function(){jQuery("#edit-download").append(jQuery("<option/>",{value:this.id,text:this.download_name}))});var t=jQuery(this).attr("checked");jQuery('input[name="enable_occ"]').removeAttr("checked"),c(),jQuery("#edit-download").change(function(){var e=parseInt(jQuery("#edit-download").val());if(jQuery(".lassign").removeAttr("checked"),e){jQuery("#download-name").val(r[e].download_name),jQuery("#download-version").val(r[e].version),"1"==r[e].enable_occ?jQuery('input[name="enable_occ"]').attr("checked","checked"):jQuery('input[name="enable_occ"]').removeAttr("checked"),"1"==r[e].hidden?jQuery('input[name="hidden"]').attr("checked","checked"):jQuery('input[name="hidden"]').removeAttr("checked"),"1"==r[e].enable_s3?jQuery('input[name="enable_s3"]').attr("checked","checked"):jQuery('input[name="enable_s3"]').removeAttr("checked"),jQuery("#occ_level").val(r[e].occ_level),jQuery("#id_project").val(r[e].id_project),jQuery("#dash-position").val(r[e].position),jQuery("#licensed").val(r[e].licensed);var t=r[e].levels;jQuery.each(t,function(e,r){jQuery('.lassign[value="'+r+'"]').attr("checked","checked")}),jQuery("#download-link").val(r[e].download_link),jQuery("#info-link").val(r[e].info_link),jQuery("#doc-link").val(r[e].doc_link),jQuery("#image-link").val(r[e].image_link),""!==r[e].image_link?(jQuery("#add-download-image").hide(),jQuery("#remove-download-image").show(),void 0!==r[e].download_image_url?jQuery("#download-image-thumnail").attr("src",r[e].download_image_url).show():jQuery("#download-image-thumnail").attr("src",r[e].image_link).show()):(jQuery("#add-download-image").show(),jQuery("#remove-download-image").hide(),jQuery("#download-image-thumnail").attr("src","").hide()),jQuery("#button-text").val(r[e].button_text),jQuery("#download-submit").val(idc_localization_strings.update),jQuery("#download-delete").show()}else jQuery("#download-name").val(""),jQuery("#download-version").val(""),jQuery('input[name="enable_s3"]').removeAttr("checked"),jQuery('input[name="hidden"]').removeAttr("checked","checked"),jQuery('input[name="enable_occ"]').removeAttr("checked"),jQuery("#occ_level").val(0),jQuery("#id_project").val(0),jQuery("#dash-position").val("a"),jQuery("#licensed").val("0"),jQuery("#download-link").val(""),jQuery("#info-link").val(""),jQuery("#doc-link").val(""),jQuery("#image-link").val(""),jQuery("#button-text").val(""),jQuery("#download-submit").val("Create"),jQuery("#download-delete").hide();d()}),jQuery('input[name="enable_occ"]').change(function(){d()})}})}function r(e){"2"==e?jQuery("#allowed-creator-levels").show():jQuery("#allowed-creator-levels").hide()}function t(){jQuery('select[name="export_product_choice"]').val()>0?jQuery('input[name="export_customers"]').removeAttr("disabled"):jQuery('input[name="export_customers"]').attr("disabled","disabled")}function a(){jQuery('input[name="export_customers"]').attr("disabled","disabled"),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"md_export_customers"},success:function(e){console.log(e),void 0!==e&&jQuery('input[name="export_customers"]').removeAttr("disabled")}})}function d(){occEnabled=jQuery('input[name="enable_occ"]').attr("checked"),"checked"==occEnabled?(jQuery("#occ_level").parents(".form-input").show(),jQuery("#id_project").length>0?jQuery("#id_project").parents(".form-input").show():jQuery("#id_project").parents(".form-input").hide()):(jQuery("#occ_level").parents(".form-input").hide(),jQuery("#id_project").parents(".form-input").hide())}function c(){jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"mdid_project_list"},success:function(e){e&&(json=JSON.parse(e),json&&jQuery.each(json,function(){jQuery('#id_project option[value="'+this.id+'"]').length<=0&&jQuery("#id_project").append(jQuery("<option/>",{value:this.id,text:this.product_name}))}))}})}function u(e){void 0==e?jQuery(".enable_paypal").removeAttr("disabled"):jQuery(".enable_paypal:not(:checked)").attr("disabled","disabled")}function n(e){jQuery(".test-field").hide(),jQuery(".live-field").hide(),jQuery('input[name="test"]').is(":checked")?"epp"==e||void 0==e?jQuery(".pp-standard-field.test-field").show():"eppadap"==e&&jQuery(".pp-adaptive-field.test-field").show():"epp"==e||void 0==e?jQuery(".pp-standard-field.live-field").show():"eppadap"==e&&jQuery(".pp-adaptive-field.live-field").show()}jQuery("#level-delete").hide(),jQuery("#credit-delete").hide(),jQuery("#download-delete").hide(),"Choose Level"==jQuery("#edit-level").val()&&jQuery(".list-shortcode").hide(),-1!==jQuery("body").attr("class").indexOf("idc")&&jQuery("body").addClass("md-admin"),jQuery(".idc-attach-datepicker").datepicker({defaultDate:"0000-00-00",dateFormat:"mm/dd/yy"}),jQuery(".md_help_link").click(function(){var e=jQuery(this).attr("id"),r="#"+e+"-help";jQuery(r).slideToggle("fast",function(){})}),jQuery("#enable_credits").length>0&&(jQuery("#enable_credits").is(":checked")?(jQuery("#credit-value").parent("div").show(),jQuery("#credit-settings-help").parent("div").show()):(jQuery("#credit-value").parent("div").hide(),jQuery("#credit-settings-help").parent("div").hide())),jQuery("#enable_credits").change(function(e){if(jQuery("#enable_credits").is(":checked"))jQuery("#credit-value").parent("div").show(),jQuery("#credit-settings-help").parent("div").show(),jQuery("#global-currency").find('option[value="credits"]').length<=0&&jQuery("#global-currency").append('<option value="credits" data-symbol="credits">'+idc_localization_strings.virtual_currency+"</option>"),jQuery(".idc-credits-field").show(),jQuery(".virtual-currency-selected").hide();else{if("credits"==jQuery("#global-currency").val())return jQuery(".virtual-currency-selected").show(),void jQuery("#enable_credits").attr("checked","checked");jQuery(".virtual-currency-selected").hide(),jQuery("#credit-value").parent("div").hide(),jQuery("#credit-settings-help").parent("div").hide(),"credits"==jQuery("#global-currency").val()&&jQuery("#global-currency").val("USD"),jQuery("#global-currency").find('option[value="credits"]').remove(),jQuery(".idc-credits-field").hide()}});var s=jQuery('input[name="show_terms"]').attr("checked");jQuery('input[name="show_terms"]').change(function(){jQuery('input[name="show_terms"]').attr("checked"),jQuery('select[name="terms_page"], select[name="privacy_page"]').parent("div").toggle()}),jQuery('select[name="export_product_choice"]').change(function(){t()}),jQuery("#enable_default_product").length>0&&(jQuery("#enable_default_product").is(":checked")?jQuery("#default_product").parent("div").show():jQuery("#default_product").parent("div").hide()),jQuery("#enable_default_product").change(function(e){jQuery(this).is(":checked")?jQuery("#default_product").parent("div").show():jQuery("#default_product").parent("div").hide()}),jQuery('select[name="product-type"] option').length<=1&&jQuery('select[name="product-type"]').parent(".form-input").hide();var l=jQuery('select[name="creator_permissions"] option:selected').val();if(r(l),jQuery('select[name="creator_permissions"]').change(function(){l=jQuery('select[name="creator_permissions"] option:selected').val(),r(l)}),get_levels(idc_product_filter),e(),t(),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_get_credits"},success:function(e){credits=JSON.parse(e),jQuery.each(credits,function(){jQuery("#edit-credit").append(jQuery("<option/>",{value:this.id,text:this.credit_name}))}),jQuery("#edit-credit").change(function(){var e=parseInt(jQuery("#edit-credit").val());jQuery("#credit-name").val(credits[e].credit_name),jQuery("#credit-price").val(credits[e].credit_price),jQuery("#credit-count").val(credits[e].credit_count),jQuery("#credit-assign").val(credits[e].credit_level),jQuery("#credit-submit").val(idc_localization_strings.update),jQuery("#credit-delete").show()})}}),jQuery("#memberdeck-users td.username").click(function(e){e.preventDefault();var r=jQuery(this).parent("tr").attr("id");r&&(id=r.replace("user-",""),jQuery("#user-list, .search-box").hide(),jQuery("#user-profile").show(),jQuery(document).trigger("idc_member_admin_edit",id),jQuery.ajax({async:!1,url:md_ajaxurl,type:"POST",data:{action:"idmember_get_profile",ID:id},success:function(e){json=JSON.parse(e),json.shipping_info&&jQuery.each(json.shipping_info,function(e,r){jQuery("#user-profile ."+e).val(r)}),json.usermeta&&jQuery.each(json.usermeta,function(e,r){jQuery("#user-profile ."+e).val(r)}),json.userdata.data&&jQuery.each(json.userdata.data,function(e,r){jQuery("#user-profile ."+e).val(r)}),jQuery(document).trigger("user_profile_edit",json),jQuery("#confirm-edit-profile").click(function(e){e.preventDefault();var r={},t=jQuery("#user-profile input"),a=!1;jQuery.each(jQuery(t),function(e,t){var i=jQuery(this).attr("name");"display_name"!=i&&"user_email"!=i||jQuery(this).val().length<=0&&(a=!0),"checkbox"==jQuery(this).attr("type")?"checked"==jQuery(this).attr("checked")&&(r[i]=jQuery(this).val()):r[i]=jQuery(this).val()}),r.id=id,a?(jQuery("p.error").remove(),jQuery("#user-profile").prepend('<p class="error">Error, missing or empty fields.</p>')):jQuery.ajax({async:!1,url:md_ajaxurl,type:"POST",data:{action:"idmember_edit_profile",Userdata:r},success:function(e){location.reload()}})})}}),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"admin_edit_subscription",user_id:id},success:function(e){e&&(json=JSON.parse(e),jQuery.isEmptyObject(json)||(jQuery(".postbox").show(),jQuery.each(json,function(){jQuery('select[name="sub_list"]').append('<option value="'+this.id+'">'+this.plan_id+"</option>")})))}}),jQuery('select[name="sub_list"]').change(function(){if("0"!==jQuery(this).children("option:selected").val()){var e=jQuery(this).children("option:selected").text();jQuery('button[name="cancel_sub"]').removeAttr("disabled").show()}else jQuery('button[name="cancel_sub"]').attr("disabled","disabled").hide()}),jQuery('button[name="cancel_sub"]').click(function(e){e.preventDefault(),jQuery(".sub_response").text("").removeClass().addClass("sub_response");var r=jQuery('select[name="sub_list"]').children("option:selected").val(),t=jQuery('select[name="sub_list"]').children("option:selected").text();jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idc_cancel_sub",plan_id:r,plan:t,user_id:id},success:function(e){if(e){var r=JSON.parse(e);"success"==r.status&&(jQuery('select[name="sub_list"] option:selected').remove(),1==jQuery('select[name="sub_list"] option').size()&&jQuery('button[name="cancel_sub"]').attr("disabled","disabled").hide()),jQuery(".sub_response").text(r.message).addClass(r.status)}}})})),jQuery("#cancel-edit-profile").click(function(e){jQuery(".form-input").html(""),jQuery("#user-list, .search-box").show(),jQuery("#user-profile").hide(),jQuery(document).trigger("idc_member_admin_cancel"),e.preventDefault()})}),jQuery(".idc_page_idc-users select.level-selector").length>0){var o=jQuery(".idc_page_idc-users select.level-selector").data("selected");o>0&&jQuery(".idc_page_idc-users select.level-selector").val(o),jQuery(".idc_page_idc-users select.level-selector").change(function(e){var r=jQuery(this).val(),t=idfStripUrlQuery(idf_current_url)+"?page=idc-users";r>0&&(t=t+"&level="+r),location.href=t})}if(jQuery("#memberdeck-users td.current-levels").click(function(e){e.preventDefault();var r=jQuery(this).parent("tr").attr("id");r&&(id=r.replace("user-",""),jQuery("#user-list, .search-box").hide(),jQuery("#edit-user").show(),jQuery.ajax({async:!1,url:md_ajaxurl,type:"POST",data:{action:"idmember_get_levels"},success:function(e){levels=JSON.parse(e),jQuery.each(levels,function(){jQuery(".form-input").append(jQuery("<tr class='level"+this.id+"'><th class='check-column'><input type='checkbox' value='"+this.id+"'/></th><td><label>"+this.level_name+"</label></td></tr>"))})}}),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_edit_user",ID:id},success:function(e){var r=jQuery(".form-input input[type='checkbox']").size()-1;if(json=JSON.parse(e),console.log(json),Object.keys(json.levels).length>0){for(i=0;i<=r;i++)jQuery(".form-input tr").eq(i).append("<td/><td></td>");jQuery.each(json.levels,function(e,r){jQuery("input[value='"+r+"']").attr("checked","checked")})}else for(i=0;i<=r;i++)jQuery(".form-input tr").eq(i).append("<td/><td>none</td>");jQuery.each(json.levels,function(e,r){if(console.log(e),console.log(r),console.log(json),json.lasts[e]){var t=json.lasts[e].e_date,a=json.lasts[e].order_date,i=json.lasts[e].id;t&&void 0!=t&&""!=t?-1!==t.indexOf("0000-00-00 00:00:00")&&(t="lifetime"):t="lifetime",jQuery(".form-input tr.level"+r).children("td:last-child").prev().text(a),jQuery(".form-input tr.level"+r).children("td:last-child").html('<a data-id="'+i+'" class="edit-date" href="#">'+t+"</a>")}}),jQuery(".form-input").on("click",".edit-date",function(e){e.preventDefault();var r=this;oID=jQuery(this).data("id"),jQuery(this).replaceWith('<span id="edit-fields"><input type="text" name="edit-date" value="yyyy-mm-dd"/><p class="edit-options"><span class="trash"><a href="#" class="edit-cancel delete">cancel</a></span>&nbsp;|&nbsp;<a href="#" class="lifetime">non-expiring</a></span></p>'),jQuery('input[name="edit-date"]').datepicker({defaultDate:"0000-00-00",dateFormat:"yy-mm-dd",onClose:function(){var e=jQuery(this).val();jQuery("span.trash").remove(),""!==e||"yyyy-mm-dd"!==e?jQuery(this).replaceWith('<a data-id="'+oID+'" class="edit-date date-edited" href="#">'+e+"</a>"):jQuery(this).replaceWith('<a data-id="'+oID+'" class="edit-date date-edited" href="#">0000-00-00</a>')}}),jQuery(".edit-cancel").click(function(e){e.preventDefault(),jQuery("#edit-fields").replaceWith(r)}),jQuery(".lifetime").click(function(e){e.preventDefault(),jQuery("p.edit-options").remove(),jQuery('input[name="edit-date"]').replaceWith('<a data-id="'+id+'" class="edit-date date-edited" href="#">0000-00-00</a>')})})}}),jQuery("#confirm-edit").click(function(e){e.preventDefault();var r=[];jQuery.each(levels,function(){r.push({level:this.id,value:jQuery(".form-input input[value='"+this.id+"']").attr("checked")})});var t=[];jQuery.each(jQuery(".date-edited"),function(){var e=jQuery(this).data("id"),r=jQuery(this).text();t.push({id:e,date:r})}),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_save_user",ID:id,Levels:r,Dates:t},success:function(e){console.log(e),e||(jQuery(".form-input").html(""),jQuery("#user-list, .search-box").show(),jQuery("#edit-user").hide(),window.location="?page=idc-users")}})})),jQuery("#cancel-edit").click(function(e){e.preventDefault(),jQuery(".form-input").html(""),jQuery("#user-list").show(),jQuery("#edit-user").hide()})}),jQuery("#memberdeck-users td.current-credits").click(function(e){e.preventDefault();var r=jQuery(this).parent("tr").attr("id");r&&(id=r.replace("user-",""),jQuery("#user-list, .search-box").hide(),jQuery("#user-credits").show(),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_credit_total",ID:id},success:function(e){console.log(e),""==e&&(e=0),jQuery('input[name="current-credits"]').val(e)}}),jQuery("#confirm-credits").click(function(e){var r=jQuery('input[name="current-credits"]').val();e.preventDefault(),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_save_credits",ID:id,Credits:r},success:function(e){jQuery(".form-input").html(""),jQuery("#user-list").show(),jQuery("#user-credits").hide(),window.location="?page=idc-users"}})})),jQuery("#cancel-credits").click(function(e){e.preventDefault(),jQuery(".form-input").html(""),jQuery("#user-list").show(),jQuery("#user-credits").hide()})}),jQuery("#memberdeck-users td.order_item.order_edit a").click(function(e){jQuery(document).trigger("idcOrderItemEdit",jQuery(this))}),jQuery("#assign-checkbox .select").click(function(e){e.preventDefault(),jQuery(".lassign").attr("checked","checked")}),jQuery("#assign-checkbox .clear").click(function(e){e.preventDefault(),jQuery(".lassign").removeAttr("checked")}),jQuery.getJSON(md_currencies,function(e){jQuery.each(e.currency,function(){jQuery("#pp-currency").append('<option value="'+this.code+'" data-symbol="'+this.symbol+'">'+this.code+"</option>");var e=jQuery("#pp-currency").data("selected");jQuery("#pp-currency").val(e),jQuery("#ppada_currency").length>0&&jQuery("#ppada_currency").append('<option value="'+this.code+'" data-symbol="'+this.symbol+'">'+this.code+"</option>")}),jQuery("#pp-currency").change(function(){var e=jQuery(this).find(":selected").data("symbol");jQuery('input[name="pp-symbol"]').val(e)})}),jQuery.getJSON(idc_global_currencies,function(e,r){if(jQuery.each(e,function(){jQuery("#global-currency").length>0&&jQuery("#global-currency").append('<option value="'+this.Currency_Code+'" data-symbol="'+this.Symbol+'">'+this.Currency_Code+"</option>")}),jQuery("#global-currency").length>0){var t=jQuery("#global-currency").data("selected");jQuery("#global-currency").append('<option value="BTC" data-symbol="BTC">BTC</option>'),jQuery("#enable_credits").is(":checked")?jQuery("#global-currency").append('<option value="credits" data-symbol="credits">'+idc_localization_strings.virtual_currency+"</option>"):"credits"==t&&(t="USD"),jQuery("#global-currency").val(t)}}),jQuery("#gateway-settings").length>0&&jQuery("#stripe_currency").length>0&&jQuery.getJSON(idc_stripe_currencies,function(e,r){jQuery.each(e,function(){jQuery("#stripe_currency").append('<option value="'+this.code+'">'+this.code+"</option>")});var t=jQuery("#stripe_currency").data("selected");jQuery("#stripe_currency").val(t)}),jQuery(".cc-gateway-chkbox:checked").length>0){var y=jQuery(".cc-gateway-chkbox:checked").get(0);if(void 0!==jQuery(y).attr("siblings")){var j=jQuery(y).attr("siblings"),p=jQuery('[siblings="'+j+'"]').get(0);jQuery(".cc-gateway-chkbox").not('.cc-gateway-chkbox[siblings="'+j+'"]').removeAttr("checked").attr("disabled","disabled")}else{var p=null,Q=jQuery(y).attr("id");jQuery(".cc-gateway-chkbox").not('.cc-gateway-chkbox[id="'+Q+'"]').removeAttr("checked").attr("disabled","disabled")}}if(jQuery(".cc-gateway-chkbox").click(function(e){var r=jQuery(this);if(r.is(":checked")){if(void 0!==r.attr("siblings"))var t=r.attr("siblings"),a=jQuery('[siblings="'+t+'"]').get(0);else var a=null;null!==a?jQuery(a).is(":checked")&&r.attr("id")==jQuery(a).attr("id")?(jQuery(".cc-gateway-chkbox").removeAttr("checked").attr("disabled","disabled"),jQuery('[siblings="'+t+'"]').removeAttr("disabled"),r.attr("checked","checked")):jQuery(a).is(":checked")&&(jQuery(".cc-gateway-chkbox").not('.cc-gateway-chkbox[siblings="'+t+'"]').removeAttr("checked").attr("disabled","disabled"),jQuery('[siblings="'+t+'"]').removeAttr("disabled"),r.attr("checked","checked"),jQuery(a).attr("checked","checked")):(jQuery(".cc-gateway-chkbox").removeAttr("checked").attr("disabled","disabled"),r.attr("checked","checked").removeAttr("disabled"))}else{if(void 0!==r.attr("siblings"))var t=r.attr("siblings"),a=jQuery('[siblings="'+t+'"]').get(0);else var a=null;null!==a&&jQuery(a).is(":checked")||(null!==a&&!jQuery(a).is(":checked")||null==a)&&jQuery(".cc-gateway-chkbox").removeAttr("disabled")}}),jQuery("#epp").click(function(e){jQuery(this).is(":checked")&&jQuery("#eppadap").prop("checked",!1)}),jQuery("#eppadap").click(function(e){jQuery(this).is(":checked")&&jQuery("#epp").prop("checked",!1)}),jQuery(".enable_paypal").length>0){var h=jQuery(".enable_paypal:checked").attr("name");u(h),n(h),jQuery(".enable_paypal").change(function(e){h=jQuery(".enable_paypal:checked").attr("name"),u(h),n(h)}),jQuery('input[name="test"]').change(function(){h=jQuery(".enable_paypal:checked").attr("name"),n(h),u(h)}),jQuery("#ppadap_max_preauth_period").keyup(function(e){!1===/[0-9]/.test(jQuery("#ppadap_max_preauth_period").val())?jQuery(this).val(""):jQuery(this).val()>364&&jQuery(this).val("364")})}if(jQuery("#enable_sendgrid").change(function(){"checked"==jQuery(this).attr("checked")?jQuery("#enable_mandrill").removeAttr("checked").attr("disabled","disabled"):jQuery("#enable_mandrill").removeAttr("disabled")}),jQuery("#enable_mandrill").change(function(){"checked"==jQuery(this).attr("checked")?jQuery("#enable_sendgrid").removeAttr("checked").attr("disabled","disabled"):jQuery("#enable_sendgrid").removeAttr("disabled")}),jQuery("#charge-screen").length>0){var m={where:"txn_type",value:"preauth"};jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idmember_get_levels",filter:m},success:function(e){e&&(json=JSON.parse(e),jQuery.each(json,function(e,r){jQuery(".md-settings-container #level-list").append(jQuery("<option/>",{value:this.id,text:this.level_name}))}))}})}jQuery("#btnProcessPreauth").click(function(e){e.preventDefault(),jQuery("#charge-notice").hide(),jQuery("#charge-notice .success-count, #charge-notice .fail-count").text(""),jQuery(this).attr("disabled","disabled");var r=jQuery("#level-list").val();jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"md_process_preauth",Level:r},success:function(e){json=JSON.parse(e),jQuery("#charge-confirm").html('<div id="charge-notice" class="updated fade below-h2" id="message"><p><span class="success-count">'+json.counts.success+'</span> Successful Transactions Processed, <span class="fail-count">'+json.counts.failures+'</span> Failed Transactions.</p><a id="close-notice" href="#">Close</a></div>'),jQuery("#charge-notice").show(),jQuery("#close-notice").click(function(e){jQuery("#charge-notice").is(":visible")&&jQuery("#charge-notice").hide()}),jQuery("#btnProcessPreauth").removeAttr("disabled")}})});var v;jQuery("#add-download-image").click(function(e){if(e.preventDefault(),v)return void v.open();v=wp.media.frames.idc_download_image_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),v.on("select",function(){attachment=v.state().get("selection").first().toJSON(),console.log("attachment: ",attachment),jQuery("#image-link").val(attachment.id),void 0!==attachment.sizes.thumbnail?jQuery("#download-image-thumnail").attr("src",attachment.sizes.thumbnail.url).show():jQuery("#download-image-thumnail").attr("src",attachment.sizes.full.url).show(),jQuery("#add-download-image").hide(),jQuery("#remove-download-image").show()}),v.open()}),jQuery("#remove-download-image").click(function(e){jQuery("#add-download-image").show(),jQuery(this).hide(),jQuery("#download-image-thumnail").attr("src","").hide(),jQuery("#image-link").val("")}),jQuery(".pre-order-status-link").click(function(e){jQuery(this).data("order-id")>0&&(jQuery(".preorder-status p.preorder-status-date").text(jQuery(this).data("preorder-status-date")),jQuery(".preorder-status p.preorder-status-error").text(jQuery(this).data("preorder-status-error")))})}),jQuery(document).bind("idcOrderItemEdit",function(e,r){idcDiscardOrderEdit();var t=jQuery(r).text(),a=jQuery(r).parent("td");jQuery(r).hide(),jQuery(r).after('<input type="text" data-item="'+jQuery(a).attr("id")+'" class="order_edit_field" value="'+t+'"/> <a href="#" class="order_edit_undo"><i class="fa fa-undo"></i></a> <a href="#'+a+'" class="order_edit_save"><i class="fa fa-save"></i></a>'),jQuery("#memberdeck-users td.order_item.order_edit a.order_edit_undo").click(function(e){jQuery(document).trigger("idcOrderItemUndo",a)}),jQuery("#memberdeck-users td.order_item.order_edit a.order_edit_save").click(function(e){jQuery(document).trigger("idcOrderItemSave",a)}),jQuery("#memberdeck-users td.order_item.order_edit input.order_edit_field").keydown(function(e){"13"==e.keyCode&&(e.preventDefault(),jQuery(document).trigger("idcOrderItemSave",a))})}),jQuery(document).bind("idcOrderItemUndo",function(e,r){idcDiscardOrderEdit()}),jQuery(document).bind("idcOrderItemSave",function(e,r){var t=idcCreateOrderEditObject(r);jQuery(document).trigger("idcOrderItemUpdate",t)}),jQuery(document).bind("idcOrderItemUpdate",function(e,r){console.log(r),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"idc_order_item_update",args:r},success:function(e){if(void 0!==e&&e){var t=jQuery('tr[data-id="'+r.id+'"]').data("currency-code");jQuery("#"+r.column+"-"+r.id+" a").text(t+r.value),idcDiscardOrderEdit()}}})});
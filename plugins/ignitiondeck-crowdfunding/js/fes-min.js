function idFesUpdateObj(){idFesUpdateLevelCount()}function idFesLevelCount(){return jQuery('input[name="project_levels"]').val()}function idFesUpdateLevelCount(e){void 0!==e&&""!=e||(e=idFesLevelCount()),id.form.fes.level_count=e,jQuery(document).trigger("idFesLevelCount",id.form.fes.level_count)}function countLevels(){return jQuery("#fes .form-level:visible").length}function formLevel(e,r){if(r<0)for(r=Math.abs(r),i=1;i<=r;i++)jQuery("#fes .form-level:visible").last().toggle();else for(i=1;i<=r;i++){var t=jQuery("#fes .form-level-clone").clone();if(jQuery(t).removeClass("form-level-clone").addClass("form-level"),jQuery(t).find("input").removeAttr("disabled"),jQuery("#fes .form-level:hidden").length>0)jQuery("#fes .form-level:hidden").first().toggle();else{jQuery("#fes .form-level-clone").last().before(t);var l=jQuery("#fes .form-level").size(),o=jQuery("#fes .form-level").last(),n=jQuery(o).find("input"),a=jQuery(o).find("textarea");jQuery.each(n,function(){jQuery(this).val("")}),jQuery.each(a,function(){jQuery(this).text("")}),jQuery(t).find("input.project_level_1_title").attr("id","project_level_"+l+"_title").removeClass().addClass("required"),jQuery(t).find('label[for="project_level_1_title"]').attr("for","project_level_"+l+"_title"),jQuery(t).find("input.project_level_1_price").attr("id","project_level_"+l+"_price").removeClass().addClass("required number-field"),jQuery(t).find('label[for="project_level_1_price"]').attr("for","project_level_"+l+"_price"),jQuery(t).find("input.project_level_1_limit").attr("id","project_level_"+l+"_limit").removeClass().add("number-field"),jQuery(t).find('label[for="project_level_1_limit"]').attr("for","project_level_"+l+"_limit"),jQuery(t).find("input.project_level_1_description").attr("id","project_level_"+l+"_description").removeClass().addClass("required"),jQuery(t).find('label[for="project_level_1_description"]').attr("for","project_level_"+l+"_description"),jQuery(t).find("textarea.project_level_1_long_description").attr("id","project_level_"+l+"_long_description").removeClass().addClass("required"),jQuery(t).find("#project_level_1_long_description-html").attr("id","project_level_"+l+"_long_description-html").data("wp-editor-id","project_level_"+l+"_long_description").attr("data-wp-editor-id","project_level_"+l+"_long_description"),jQuery(t).find("#project_level_1_long_description-tmce").attr("id","project_level_"+l+"_long_description-tmce").data("wp-editor-id","project_level_"+l+"_long_description").attr("data-wp-editor-id","project_level_"+l+"_long_description"),jQuery(t).find("#wp-project_level_1_long_description-wrap").attr("id","wp-project_level_"+l+"_long_description-wrap"),jQuery(t).find("#wp-project_level_1_long_description-editor-tools").attr("id","wp-project_level_"+l+"_long_description-editor-tools"),jQuery(t).find("#wp-project_level_1_long_description-editor-container").attr("id","wp-project_level_"+l+"_long_description-editor-container"),jQuery(t).find('label[for="project_level_1_long_description"]').attr("for","project_level_"+l+"_long_description"),jQuery(t).find("button.insert-media.add_media").attr("data-editor","project_level_"+l+"_long_description"),jQuery(t).find("#wp-project_level_1_long_description-media-buttons").attr("id","wp-project_level_"+l+"_long_description-media-buttons"),jQuery(t).find('label[for="level_project_fund_type_1"]').attr("for","level_project_fund_type_"+l).removeClass(),jQuery(t).find("select.level_project_fund_type_1").attr("id","level_project_fund_type_"+l).removeClass(),jQuery(document).trigger("idcfLevelCloned",[t,l]),tinyMCE.execCommand("mceAddEditor",!1,"project_level_"+l+"_long_description"),quicktags({buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,more,close",id:"project_level_"+l+"_long_description"}),QTags._buttonsInit()}}}id.form.fes={level_count:void 0,levels:{}},jQuery(document).trigger("idFesInit"),jQuery(document).ready(function(){idFesUpdateObj(),jQuery("#fes").on("change",function(e){var r=e.target;jQuery(document).trigger("id_"+jQuery(r).attr("name"),jQuery(r).val())}),jQuery(document).bind("id_project_levels",function(e,r){idFesUpdateLevelCount(r)});var e;jQuery('input[name="project_fesubmit"]').click(function(r){e=jQuery(this).attr("name")}),jQuery('input[name="project_fesave"]').click(function(r){e=jQuery(this).attr("name")}),jQuery.each(jQuery('select[name="project_fund_type"] option'),function(){"disabled"==jQuery(this).attr("disabled")&&jQuery(this).remove()}),jQuery('[name="project_fund_type[]"]').each(function(e,r){jQuery(this).children("option").length<=1&&jQuery(this).parents(".form-row").hide()}),1==jQuery('select[name="project_fund_type"] option').length&&jQuery('select[name="project_fund_type"]').closest("li").remove(),jQuery(document).on("keyup",".number-field",function(e){parseFloat(jQuery(this).val())<0&&jQuery(this).val("0")}),jQuery("form#fes").submit(function(r){if("project_fesubmit"==e){if(0==jQuery('textarea[name="project_long_description"]:visible').length){jQuery(".wp-switch-editor.switch-html").click();var t=!0}else if(0==jQuery('textarea[name="level_long_description[]"]:visible').length){jQuery(".wp-switch-editor.switch-html").click();var t=!0}else var t=!1;var i=!0,l=jQuery(".form-row .required");if(jQuery.each(l,function(e,r){var l=jQuery(this).val();""==l||void 0==l?(i=!1,jQuery(this).addClass("error")):jQuery(this).removeClass("error"),1==t&&(console.log("clickback"),jQuery(".wp-switch-editor.switch-html").click())}),!i){console.log(jQuery(".error").get(0));var o=jQuery(".error").get(0),n=jQuery(o).offset().top-55;jQuery("html, body").animate({scrollTop:n},500)}return i}var i=!0;return i}),jQuery(".id-fes-form-wrapper").length&&jQuery(".id-fes-form-wrapper .date").datepicker({dateFormat:idfDatePickerFormat()});var r=parseInt(jQuery('input[name="project_levels"]').attr("min"));jQuery('#fes input[name="project_levels"]').change(function(){var e=countLevels(),t=jQuery(this).val();jQuery.isNumeric(t)?(levelChange=t-e,formLevel(e,levelChange)):jQuery(this).val(e),parseInt(jQuery(this).val())<r&&jQuery(this).val(r)});var t=jQuery('#fes input[type="file"]');jQuery.each(jQuery(t),function(e,r){var t=jQuery(this).data("url");if(t&&t.length>0){var i=jQuery(this).attr("name");jQuery(this).after('<p class="image_url" data-url="'+t+'">'+t+"</p>"),jQuery(this).replaceWith('<span class="image_swap"><img class="project_image" src="'+t+'"/><br/><a name="'+i+'" href="#" class="remove_image">Remove</a> | <a href="#" class="show_url" data-url="'+t+'">Show URL</a></span>'),jQuery("#fes .remove_image").click(function(e){e.preventDefault();var r=jQuery(this).attr("name");jQuery(this).parent(".image_swap").replaceWith('<input type="file" name="'+r+'" class="'+r+'" accept="image/*"/>'),jQuery("#"+r+"_removed").val("yes")})}}),jQuery("body").on("change",'#fes input[type="file"]',function(e){if(console.log("image value: ",jQuery(this).val(),", name: ",jQuery(this).attr("name")),""!==jQuery(this).val()){var r=jQuery(this).attr("name");jQuery("#"+r+"_removed").val("no")}}),jQuery("#fes .show_url").click(function(e){e.preventDefault();var r=jQuery(this).text(),t=jQuery(this).data("url");"Show URL"==r?jQuery(this).text("Hide URL"):jQuery(this).text("Show URL"),jQuery('#fes .image_url[data-url="'+t+'"]').toggle()})});